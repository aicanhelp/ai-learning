# 第一、二章 第一个Spring Security项目的建立以及基本认证

本章包括

- 使用Spring Security创建你的第一个项目
- 使用认证和授权的基本角色设计简单的功能
- 应用基本接口来理解这些角色之间的关系
- 为主要职责编写你的实现 覆盖Spring Boot的默认配置

Spring Boot是作为Spring框架的应用开发的一个进化阶段出现的。与其说你需要编写所有的配置，不如说Spring Boot已经预设了一些配置，所以你可以只覆盖那些与你的实现不匹配的配置。我们也称这种方法为 “惯例–配置”。

在这种开发应用程序的方式存在之前，开发人员为他们必须创建的所有应用程序反复编写几十行代码。在过去，当我们以单体方式开发大多数架构时，这种情况不太明显。在单体架构下，你只需要在开始时写一次这些配置，之后就很少需要再碰它们。当面向服务的软件架构发展起来后，我们开始感受到为配置每个服务而需要编写的模板代码的痛苦。如果你觉得有趣，你可以看看Willie Wheeler与Joshua White合著的《Spring in Practice》（Manning，2013）中的第三章。这一章是一本较早的书，描述了用Spring 3编写一个Web应用程序。这样一来，你就会明白，为了一个小小的单页Web应用，你不得不写多少配置。这里是该章的链接：https://livebook.manning.com/book/spring-in-practice/chapter-3/

由于这个原因，随着最近应用程序的发展，特别是那些微服务的发展，Spring Boot变得越来越流行。Spring Boot为你的项目提供了自动配置功能，并缩短了设置所需的时间。我想说的是，它为今天的软件开发带来了合适的理念。
在本章中，我们将从第一个使用Spring Security的应用程序开始。对于你用Spring框架开发的应用，Spring Security是实现应用级安全的绝佳选择。我们将使用Spring Boot并讨论自动配置的默认值，以及对覆盖这些默认值的简要介绍。对默认配置的考虑为Spring Security提供了一个很好的介绍，同时也说明了认证的概念。
一旦我们开始了第一个项目，我们将更详细地讨论各种认证选项。在第3章到第6章中，我们将继续为你在第一个例子中看到的不同职责提供更具体的构架。你还会看到应用这些配置的不同方法，这取决于架构风格。在本章中，我们将采用以下步骤：

- 创建一个只有Spring Security和Web依赖的项目，看看如果你不添加任何配置，它的表现如何。这样，你就会明白你应该从默认的认证和授权配置中期待什么。

- 改变项目，通过覆盖默认值来增加用户管理的功能，定义自定义用户和密码。

- 在观察到应用程序默认对所有端点进行认证后，了解到这也是可以定制的。

- 对相同的配置应用不同的风格，以了解最佳实践。
  

## 2.1 从第一个项目开始
  
让我们创建第一个项目，这样我们就有东西可以在第一个例子中工作。这个项目是一个小型的Web应用，暴露了一个REST端点。你会看到Spring Security是如何不费吹灰之力，使用HTTP Basic认证来保护这个端点的。仅仅通过创建项目和添加正确的依赖项，SpringBoot就会应用默认的配置，包括在你启动应用程序时使用一个用户名和密码。
  
      注意 你有多种选择来创建Spring Boot项目。一些开发环境提供了直接创建项目的可能性。
      如果你在创建Spring Boot项目时需要帮助，你可以找到附录中描述的几种方法。
      如需更多细节，我推荐Craig Walls的《Spring Boot in Action》（Manning，2016）。
      Spring Boot in Action》中的第2章准确地描述了用Spring Boot创建一个Web应用
      （https://livebook.manning.com/book/spring-boot-in-action/chapter-2/）。
  
本书中的例子参考了源代码。在每个例子中，我还指定了你需要添加到pom.xml文件中的依赖项。你可以，而且我建议你这样做，下载本书提供的项目和可用的源代码：https://www.manning.com/downloads/2105。如果你遇到困难，这些项目会帮助你。你也可以用这些项目来验证你的最终解决方案。
  
      注意 本书中的例子不依赖于你选择的构建工具。你可以使用Maven或Gradle。
      但为了保持一致，我用Maven构建了所有的例子。
  
第一个项目也是最小的一个。如前所述，它是一个简单的应用，暴露了一个REST端点，你可以调用它，然后接收图2.1中描述的响应。这个项目足以让你学习使用Spring Security开发应用程序的第一步。它介绍了用于认证和授权的Spring Security架构的基础知识。
  
